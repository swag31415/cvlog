<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>cvlog</title>
  <link rel="icon" href="logo.svg" type="image/x-icon">
  <style>
    body {
      font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    }
    div {
      padding-left: 2em;
    }
  </style>
</head>

<body style="background-color: black; color: wheat;">

<script>
const resume = {
  name: {input_type: 'text', data: ""},
  phone_number: {input_type: 'text', data: ""},
  email: {input_type: 'text', data: ""},
  linkedin: {input_type: 'text', data: ""},
  github: {input_type: 'text', data: ""},
  gpa: {input_type: 'text', data: ""},
  test_scores: {input_type: 'list', format: {
      test_name: {input_type: 'text', data: ""},
      test_score: {input_type: 'text', data: ""}
    }, data: []},
  experience: {input_type: 'list', format: {
      organization_name: {input_type: 'text', data: ""},
      position: {input_type: 'text', data: ""},
      descriptors: {input_type: 'list', format: {input_type: 'big_text', data: ""}, data: []},
      location: {input_type: 'text', data: ""},
      start_date: {input_type: 'text', data: ""},
      end_date: {input_type: 'text', data: ""},
      contacts: {input_type: 'list', format: {
          contact_name: {input_type: 'text', data: ""},
          phone_number: {input_type: 'text', data: ""},
          email: {input_type: 'text', data: ""}
        }, data: []}
    }, data: []},
  education: {input_type: 'list', format: {
      institution_name: {input_type: 'text', data: ""},
      degree: {input_type: 'text', data: ""},
      location: {input_type: 'text', data: ""},
      start_date: {input_type: 'text', data: ""},
      end_date: {input_type: 'text', data: ""},
      references: {input_type: 'list', format: {
          reference_name: {input_type: 'text', data: ""},
          phone_number: {input_type: 'text', data: ""},
          email: {input_type: 'text', data: ""}
        }, data: []},
      coursework: {input_type: 'list', format: {input_type: 'big_text', data: ""}, data: []}
    }, data: []},
  activities: {input_type: 'list', format: {
      organization_name: {input_type: 'text', data: ""},
      leadership_position: {input_type: 'text', data: ""},
      descriptors: {input_type: 'list', format: {input_type: 'big_text', data: ""}, data: []},
      location: {input_type: 'text', data: ""},
      start_date: {input_type: 'text', data: ""},
      end_date: {input_type: 'text', data: ""},
      contacts: {input_type: 'list', format: {
          contact_name: {input_type: 'text', data: ""},
          phone_number: {input_type: 'text', data: ""},
          email: {input_type: 'text', data: ""}
        }, data: []}
    }, data: []},
  skills: {input_type: 'list', format: {
      name: {input_type: 'text', data: ""},
      proficiency: {input_type: 'text', data: ""}
    }, data: []},
  languages: {input_type: 'list', format: {
      name: {input_type: 'text', data: ""},
      proficiency: {input_type: 'text', data: ""}
    }, data: []},
  certifications: {input_type: 'list', format: {
      name: {input_type: 'text', data: ""},
      date_acquired: {input_type: 'text', data: ""},
      expires_on: {input_type: 'text', data: ""}
    }, data: []},
  honors: {input_type: 'list', format: {
      name: {input_type: 'text', data: ""},
      date_acquired: {input_type: 'text', data: ""}
    }, data: []}
}

function el(type, ...children) {
  result = document.createElement(type)
  if (children) result.append(...children.flat(1))
  return result
}

function inp(type, value) {
  result = el("input")
  result.setAttribute("type", type)
  result.setAttribute("value", value)
  return result
}

function btn(text, on_click) {
  result = inp("button", text)
  result.addEventListener("click", on_click)
  return result
}

function trans(obj) {
  switch (obj.input_type) {
    case "text": return inp("text", obj.data)
    case "big_text": return el("div", inp("textarea", obj.data))
    case "list":
      button = btn("add", e => {
        templ = trans(obj.format)
        templ.append(btn("remove", e => e.target.parentElement.remove()))
        e.target.before(templ)
      })
      return ["[", ...obj.data.map(to_istr), button, "]"]
    default: return to_istr(obj)
  }
}

function to_istr(json) {
  return el("div", "{", ...Object.entries(json).map(([name, value]) => {
    return el("div", name, ": ", trans(value))
  }), "}")
}

document.body.append(to_istr(resume))

</script>
</body>